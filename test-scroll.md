# 自动滚动测试指南

## 测试步骤

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **打开浏览器开发者工具**
   - 按 F12 或右键选择"检查"
   - 切换到 Console 标签页

3. **测试正常自动滚动**
   - 发送一条消息给 AI
   - 观察控制台是否显示：`📝 消息更新，准备自动滚动`
   - 观察控制台是否显示：`✅ 执行自动滚动到底部`
   - 确认页面自动滚动到最新消息

4. **测试暂停自动滚动**
   - 在 AI 回复过程中，向上滚动查看历史消息
   - 观察控制台是否显示：`🚫 用户向上滚动，暂停自动滚动`
   - 观察控制台是否显示：`⏸️ 消息更新但自动滚动已暂停`
   - 观察控制台是否显示：`❌ shouldAutoScroll 为 false，跳过滚动`
   - 确认页面不再自动滚动

5. **测试恢复自动滚动**
   - 滚动回页面底部
   - 观察控制台是否显示：`✅ 用户回到底部附近，恢复自动滚动`
   - 确认自动滚动功能恢复

## 预期行为

- ✅ 正常聊天时自动滚动
- ✅ 用户向上滚动 20px 以上时暂停自动滚动（阈值降低）
- ✅ 用户回到底部附近时恢复自动滚动
- ✅ 发送新消息时重置自动滚动状态
- ✅ 减少消息闪烁现象
- ✅ 更流畅的滚动体验

## 调试信息说明

- `📝 消息更新，准备自动滚动` - 消息更新且允许自动滚动
- `⏸️ 消息更新但自动滚动已暂停` - 消息更新但自动滚动已暂停
- `✅ 执行自动滚动到底部` - 实际执行滚动操作
- `❌ shouldAutoScroll 为 false，跳过滚动` - 跳过滚动操作
- `🚫 用户向上滚动，暂停自动滚动` - 检测到用户向上滚动
- `✅ 用户回到底部附近，恢复自动滚动` - 检测到用户回到底部
- `🔄 重置自动滚动状态` - 发送新消息时重置状态
